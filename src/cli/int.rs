use crate::cli::CliState;
use crate::{asm, println};

pub unsafe fn interrupt(cli_state: &CliState) {
    let (argc, mut argv) = crate::split_u8_string!(cli_state.command_line);

    if argc != 2 {
        println!("Usage: int <hex_code>");
        return;
    }

    let int_code_str = argv.nth(1).unwrap_or_default();
    let without_prefix = int_code_str.trim_start_matches("0x");
    let int_code = u32::from_str_radix(without_prefix, 16).unwrap_or(256);

    match int_code {
        0 => asm!("int 0"),
        1 => asm!("int 1"),
        2 => asm!("int 2"),
        3 => asm!("int 3"),
        4 => asm!("int 4"),
        5 => asm!("int 5"),
        6 => asm!("int 6"),
        7 => asm!("int 7"),
        8 => asm!("int 8"),
        9 => asm!("int 9"),
        10 => asm!("int 10"),
        11 => asm!("int 11"),
        12 => asm!("int 12"),
        13 => asm!("int 13"),
        14 => asm!("int 14"),
        15 => asm!("int 15"),
        16 => asm!("int 16"),
        17 => asm!("int 17"),
        18 => asm!("int 18"),
        19 => asm!("int 19"),
        20 => asm!("int 20"),
        21 => asm!("int 21"),
        22 => asm!("int 22"),
        23 => asm!("int 23"),
        24 => asm!("int 24"),
        25 => asm!("int 25"),
        26 => asm!("int 26"),
        27 => asm!("int 27"),
        28 => asm!("int 28"),
        29 => asm!("int 29"),
        30 => asm!("int 30"),
        31 => asm!("int 31"),
        32 => asm!("int 32"),
        33 => asm!("int 33"),
        34 => asm!("int 34"),
        35 => asm!("int 35"),
        36 => asm!("int 36"),
        37 => asm!("int 37"),
        38 => asm!("int 38"),
        39 => asm!("int 39"),
        40 => asm!("int 40"),
        41 => asm!("int 41"),
        42 => asm!("int 42"),
        43 => asm!("int 43"),
        44 => asm!("int 44"),
        45 => asm!("int 45"),
        46 => asm!("int 46"),
        47 => asm!("int 47"),
        48 => asm!("int 48"),
        49 => asm!("int 49"),
        50 => asm!("int 50"),
        51 => asm!("int 51"),
        52 => asm!("int 52"),
        53 => asm!("int 53"),
        54 => asm!("int 54"),
        55 => asm!("int 55"),
        56 => asm!("int 56"),
        57 => asm!("int 57"),
        58 => asm!("int 58"),
        59 => asm!("int 59"),
        60 => asm!("int 60"),
        61 => asm!("int 61"),
        62 => asm!("int 62"),
        63 => asm!("int 63"),
        64 => asm!("int 64"),
        65 => asm!("int 65"),
        66 => asm!("int 66"),
        67 => asm!("int 67"),
        68 => asm!("int 68"),
        69 => asm!("int 69"),
        70 => asm!("int 70"),
        71 => asm!("int 71"),
        72 => asm!("int 72"),
        73 => asm!("int 73"),
        74 => asm!("int 74"),
        75 => asm!("int 75"),
        76 => asm!("int 76"),
        77 => asm!("int 77"),
        78 => asm!("int 78"),
        79 => asm!("int 79"),
        80 => asm!("int 80"),
        81 => asm!("int 81"),
        82 => asm!("int 82"),
        83 => asm!("int 83"),
        84 => asm!("int 84"),
        85 => asm!("int 85"),
        86 => asm!("int 86"),
        87 => asm!("int 87"),
        88 => asm!("int 88"),
        89 => asm!("int 89"),
        90 => asm!("int 90"),
        91 => asm!("int 91"),
        92 => asm!("int 92"),
        93 => asm!("int 93"),
        94 => asm!("int 94"),
        95 => asm!("int 95"),
        96 => asm!("int 96"),
        97 => asm!("int 97"),
        98 => asm!("int 98"),
        99 => asm!("int 99"),
        100 => asm!("int 100"),
        101 => asm!("int 101"),
        102 => asm!("int 102"),
        103 => asm!("int 103"),
        104 => asm!("int 104"),
        105 => asm!("int 105"),
        106 => asm!("int 106"),
        107 => asm!("int 107"),
        108 => asm!("int 108"),
        109 => asm!("int 109"),
        110 => asm!("int 110"),
        111 => asm!("int 111"),
        112 => asm!("int 112"),
        113 => asm!("int 113"),
        114 => asm!("int 114"),
        115 => asm!("int 115"),
        116 => asm!("int 116"),
        117 => asm!("int 117"),
        118 => asm!("int 118"),
        119 => asm!("int 119"),
        120 => asm!("int 120"),
        121 => asm!("int 121"),
        122 => asm!("int 122"),
        123 => asm!("int 123"),
        124 => asm!("int 124"),
        125 => asm!("int 125"),
        126 => asm!("int 126"),
        127 => asm!("int 127"),
        128 => asm!("int 128"),
        129 => asm!("int 129"),
        130 => asm!("int 130"),
        131 => asm!("int 131"),
        132 => asm!("int 132"),
        133 => asm!("int 133"),
        134 => asm!("int 134"),
        135 => asm!("int 135"),
        136 => asm!("int 136"),
        137 => asm!("int 137"),
        138 => asm!("int 138"),
        139 => asm!("int 139"),
        140 => asm!("int 140"),
        141 => asm!("int 141"),
        142 => asm!("int 142"),
        143 => asm!("int 143"),
        144 => asm!("int 144"),
        145 => asm!("int 145"),
        146 => asm!("int 146"),
        147 => asm!("int 147"),
        148 => asm!("int 148"),
        149 => asm!("int 149"),
        150 => asm!("int 150"),
        151 => asm!("int 151"),
        152 => asm!("int 152"),
        153 => asm!("int 153"),
        154 => asm!("int 154"),
        155 => asm!("int 155"),
        156 => asm!("int 156"),
        157 => asm!("int 157"),
        158 => asm!("int 158"),
        159 => asm!("int 159"),
        160 => asm!("int 160"),
        161 => asm!("int 161"),
        162 => asm!("int 162"),
        163 => asm!("int 163"),
        164 => asm!("int 164"),
        165 => asm!("int 165"),
        166 => asm!("int 166"),
        167 => asm!("int 167"),
        168 => asm!("int 168"),
        169 => asm!("int 169"),
        170 => asm!("int 170"),
        171 => asm!("int 171"),
        172 => asm!("int 172"),
        173 => asm!("int 173"),
        174 => asm!("int 174"),
        175 => asm!("int 175"),
        176 => asm!("int 176"),
        177 => asm!("int 177"),
        178 => asm!("int 178"),
        179 => asm!("int 179"),
        180 => asm!("int 180"),
        181 => asm!("int 181"),
        182 => asm!("int 182"),
        183 => asm!("int 183"),
        184 => asm!("int 184"),
        185 => asm!("int 185"),
        186 => asm!("int 186"),
        187 => asm!("int 187"),
        188 => asm!("int 188"),
        189 => asm!("int 189"),
        190 => asm!("int 190"),
        191 => asm!("int 191"),
        192 => asm!("int 192"),
        193 => asm!("int 193"),
        194 => asm!("int 194"),
        195 => asm!("int 195"),
        196 => asm!("int 196"),
        197 => asm!("int 197"),
        198 => asm!("int 198"),
        199 => asm!("int 199"),
        200 => asm!("int 200"),
        201 => asm!("int 201"),
        202 => asm!("int 202"),
        203 => asm!("int 203"),
        204 => asm!("int 204"),
        205 => asm!("int 205"),
        206 => asm!("int 206"),
        207 => asm!("int 207"),
        208 => asm!("int 208"),
        209 => asm!("int 209"),
        210 => asm!("int 210"),
        211 => asm!("int 211"),
        212 => asm!("int 212"),
        213 => asm!("int 213"),
        214 => asm!("int 214"),
        215 => asm!("int 215"),
        216 => asm!("int 216"),
        217 => asm!("int 217"),
        218 => asm!("int 218"),
        219 => asm!("int 219"),
        220 => asm!("int 220"),
        221 => asm!("int 221"),
        222 => asm!("int 222"),
        223 => asm!("int 223"),
        224 => asm!("int 224"),
        225 => asm!("int 225"),
        226 => asm!("int 226"),
        227 => asm!("int 227"),
        228 => asm!("int 228"),
        229 => asm!("int 229"),
        230 => asm!("int 230"),
        231 => asm!("int 231"),
        232 => asm!("int 232"),
        233 => asm!("int 233"),
        234 => asm!("int 234"),
        235 => asm!("int 235"),
        236 => asm!("int 236"),
        237 => asm!("int 237"),
        238 => asm!("int 238"),
        239 => asm!("int 239"),
        240 => asm!("int 240"),
        241 => asm!("int 241"),
        242 => asm!("int 242"),
        243 => asm!("int 243"),
        244 => asm!("int 244"),
        245 => asm!("int 245"),
        246 => asm!("int 246"),
        247 => asm!("int 247"),
        248 => asm!("int 248"),
        249 => asm!("int 249"),
        250 => asm!("int 250"),
        251 => asm!("int 251"),
        252 => asm!("int 252"),
        253 => asm!("int 253"),
        254 => asm!("int 254"),
        255 => asm!("int 255"),
        _ => {}
    }
}
